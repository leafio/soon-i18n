(function(l,a){typeof exports=="object"&&typeof module<"u"?a(exports,require("solid-js")):typeof define=="function"&&define.amd?define(["exports","solid-js"],a):(l=typeof globalThis<"u"?globalThis:l||self,a(l["soon-i18n-solid"]={},l["solid-js"]))})(this,function(l,a){"use strict";const m=(t,n)=>{if(t.indexOf("{")===-1)return t;let e=t;const c=/\{(.*?)\}/g,o=t.match(c);return o&&o.forEach(r=>{if(r.length>2){const u=r.slice(1,r.length-1);e=e.replace(new RegExp(r,"gm"),n[u]??"")}}),e},f=(t,n="",e={})=>{for(const c of Object.keys(t)){const o=`${n?n+".":""}${c}`;typeof t[c]!="object"?e[o]=t[c]:f(t[c],o,e)}return e},_=(t,n,...e)=>{if(!t)return"";const c=t[n]||n;return e.length?typeof c=="function"?c(...e):m(c,e[0]):c},y=(t,n,e,c)=>{if(c&&e&&!n[e]){const o=c[e];typeof o=="function"?(n[e]=!0,o().then(r=>{t(r.default??{})}).finally(()=>{delete n[e]})):t(o??{})}},b=(t,n={})=>{for(const e in t)t[e]&&typeof t[e]=="object"&&(n[e]=f(t[e]));return n},h=(t,n)=>{const[e,c]=a.createSignal(t.lang??""),[o]=a.createSignal(t.fallbacks??[]),[r,u]=a.createSignal(b(n),{equals:!1}),O={};return{tLocales:j=>{const[d,k]=a.createSignal(b(j),{equals:!1}),q={};return(S,...x)=>{const g={};return[e(),...o()].reverse().forEach(s=>{Object.assign(g,r()[s],d()[s])}),(!d()[e()]||!(S in g))&&[e(),...o()].some(s=>{if(!d()[s])return y(p=>{k(i=>(i[s]=f(p),i))},q,s,j),!0;if(!r()[s])return y(p=>{u(i=>(i[s]=f(p),i))},O,s,n),!0}),_(g,S,...x)}},lang:e,setLang:c}},I=h;l.createI18n=h,l.createI18nSafe=I,Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});
