(function(a,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("solid-js")):typeof define=="function"&&define.amd?define(["exports","solid-js"],l):(a=typeof globalThis<"u"?globalThis:a||self,l(a["soon-i18n-solid"]={},a["solid-js"]))})(this,function(a,l){"use strict";const m=(t,n)=>{if(t.indexOf("{")===-1)return t;let e=t;const o=/\{(.*?)\}/g,r=t.match(o);return r&&r.forEach(c=>{if(c.length>2){const f=c.slice(1,c.length-1);e=e.replace(new RegExp(c,"gm"),n[f]??"")}}),e},u=(t,n="",e={})=>{for(const o of Object.keys(t)){const r=`${n?n+".":""}${o}`;typeof t[o]!="object"?e[r]=t[o]:u(t[o],r,e)}return e},S=(t,n,...e)=>{if(!t)return"";const o=t[n]||n;return e.length?typeof o=="function"?o(...e):m(o,e[0]):o},p=(t,n,e,o)=>{if(o&&e&&!n[e]){const r=o[e];typeof r=="function"?(n[e]=!0,r().then(c=>{t(c.default??{})}).finally(()=>{delete n[e]})):t(r??{})}},y=(t,n={})=>{for(const e in t)t[e]&&typeof t[e]=="object"&&(n[e]=u(t[e]));return n},_=(t,n={})=>{const[e,o]=l.createSignal(t.lang??""),[r]=l.createSignal(t.fallbacks),[c,f]=l.createSignal(y(n),{equals:!1}),x={};return{tLocales:(b={})=>{const[h,O]=l.createSignal(y(b),{equals:!1}),k={};return(j,...q)=>{const d={};return[e(),...r()].reverse().forEach(s=>{Object.assign(d,c()[s],h()[s])}),j in d||[e(),...r()].some(s=>{if(!h()[s])return p(g=>{O(i=>(i[s]=u(g),i))},k,s,b),!0;if(!c()[s])return p(g=>{f(i=>(i[s]=u(g),i))},x,s,n),!0}),S(d,j,...q)}},lang:e,setLang:o}};a.createI18n=_,Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});
