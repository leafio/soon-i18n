(function(i,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("svelte/store")):typeof define=="function"&&define.amd?define(["exports","svelte/store"],c):(i=typeof globalThis<"u"?globalThis:i||self,c(i["soon-i18n-svelte"]={},i.store))})(this,function(i,c){"use strict";const S=(t,n)=>{if(t.indexOf("{")===-1)return t;let e=t;const r=/\{(.*?)\}/g,o=t.match(r);return o&&o.forEach(f=>{if(f.length>2){const m=f.slice(1,f.length-1);e=e.replace(new RegExp(f,"gm"),n[m]??"")}}),e},u=(t,n="",e={})=>{for(const r of Object.keys(t)){const o=`${n?n+".":""}${r}`;typeof t[r]!="object"?e[o]=t[r]:u(t[r],o,e)}return e},k=(t,n,...e)=>{if(!t)return"";const r=t[n]||n;return e.length?typeof r=="function"?r(...e):S(r,e[0]):r},y=(t,n,e,r)=>{if(r&&e&&!n[e]){const o=r[e];typeof o=="function"?(n[e]=!0,o().then(f=>{t(f.default??{})}).finally(()=>{delete n[e]})):t(o??{})}},h=(t,n={})=>{for(const e in t)t[e]&&typeof t[e]=="object"&&(n[e]=u(t[e]));return n},j=(t,n)=>{const e=c.writable(t.lang??""),r=c.writable(t.fallbacks??[]),o=c.writable(h(n)),f={};return{tLocales:v=>{const g=c.writable(h(v)),E={};return c.derived([e,r,o,g],([a,w,I,l])=>(O,...T)=>{const d={};return[a,...w].reverse().forEach(s=>{Object.assign(d,I[s],l[s])}),(!l[a]||!(O in d))&&[a,...w].some(s=>{if(!l[s])return y(p=>{g.update(b=>({...b,[s]:u(p)}))},E,s,v),!0;if(!I[s])return y(p=>{o.update(b=>({...b,[s]:u(p)}))},f,s,n),!0}),k({...d},O,...T)})},lang:e,fallbacks:r}},x=j;i.createI18n=j,i.createI18nSafe=x,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
