(function(f,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("svelte/store")):typeof define=="function"&&define.amd?define(["exports","svelte/store"],c):(f=typeof globalThis<"u"?globalThis:f||self,c(f["soon-i18n-svelte"]={},f.store))})(this,function(f,c){"use strict";const O=(t,n)=>{if(t.indexOf("{")===-1)return t;let e=t;const r=/\{(.*?)\}/g,o=t.match(r);return o&&o.forEach(i=>{if(i.length>2){const j=i.slice(1,i.length-1);e=e.replace(new RegExp(i,"gm"),n[j]??"")}}),e},u=(t,n="",e={})=>{for(const r of Object.keys(t)){const o=`${n?n+".":""}${r}`;typeof t[r]!="object"?e[o]=t[r]:u(t[r],o,e)}return e},k=(t,n,...e)=>{if(!t)return"";const r=t[n]||n;return e.length?typeof r=="function"?r(...e):O(r,e[0]):r},y=(t,n,e,r)=>{if(r&&e&&!n[e]){const o=r[e];typeof o=="function"?(n[e]=!0,o().then(i=>{t(i.default??{})}).finally(()=>{delete n[e]})):t(o??{})}},h=(t,n={})=>{for(const e in t)t[e]&&typeof t[e]=="object"&&(n[e]=u(t[e]));return n},E=(t,n={})=>{const e=c.writable(t.lang??""),r=c.writable(t.fallbacks??[]),o=c.writable(h(n)),i={};return{tLocales:(m={})=>{const v=c.writable(h(m)),T={};return c.derived([e,r,o,v],([l,g,w,a])=>(x,...I)=>{const d={};return[l,...g].reverse().forEach(s=>{Object.assign(d,w[s],a[s])}),(!a[l]||!(x in d))&&[l,...g].some(s=>{if(!a[s])return y(p=>{v.update(b=>({...b,[s]:u(p)}))},T,s,m),!0;if(!w[s])return y(p=>{o.update(b=>({...b,[s]:u(p)}))},i,s,n),!0}),k({...d},x,...I)})},lang:e,fallbacks:r}};f.createI18n=E,Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});
