(function(f,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("svelte/store")):typeof define=="function"&&define.amd?define(["exports","svelte/store"],c):(f=typeof globalThis<"u"?globalThis:f||self,c(f["soon-i18n-svelte"]={},f.store))})(this,function(f,c){"use strict";const O=(t,n)=>{if(t.indexOf("{")===-1)return t;let e=t;const r=/\{(.*?)\}/g,o=t.match(r);return o&&o.forEach(i=>{if(i.length>2){const y=i.slice(1,i.length-1);e=e.replace(new RegExp(i,"gm"),n[y]??"")}}),e},u=(t,n="",e={})=>{for(const r of Object.keys(t)){const o=`${n?n+".":""}${r}`;typeof t[r]!="object"?e[o]=t[r]:u(t[r],o,e)}return e},k=(t,n,...e)=>{if(!t)return"";const r=t[n]||n;return e.length?typeof r=="function"?r(...e):O(r,e[0]):r},p=(t,n,e,r)=>{if(r&&e&&!n[e]){const o=r[e];typeof o=="function"?(n[e]=!0,o().then(i=>{t(i.default??{})}).finally(()=>{delete n[e]})):t(o??{})}},b=(t,n={})=>{for(const e in t)t[e]&&typeof t[e]=="object"&&(n[e]=u(t[e]));return n},E=(t,n={})=>{const e=c.writable(t.lang??""),r=c.writable(t.fallbacks),o=c.writable(b(n)),i={};return{tLocales:(h={})=>{const g=c.writable(b(h)),T={};return c.derived([e,r,o,g],([j,m,v,w])=>(x,...I)=>{const l={};return[j,...m].reverse().forEach(s=>{Object.assign(l,v[s],w[s])}),x in l||[j,...m].some(s=>{if(!w[s])return p(a=>{g.update(d=>({...d,[s]:u(a)}))},T,s,h),!0;if(!v[s])return p(a=>{o.update(d=>({...d,[s]:u(a)}))},i,s,n),!0}),k({...l},x,...I)})},lang:e,fallbacks:r}};f.createI18n=E,Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});
